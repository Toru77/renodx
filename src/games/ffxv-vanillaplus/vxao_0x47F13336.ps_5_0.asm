//
// Generated by Microsoft (R) HLSL Shader Compiler 10.0.10011.16384
//
//   using 3Dmigoto v1.3.16 on Thu Feb 26 19:25:34 2026
//
//
// Buffer Definitions:
//
// cbuffer VoxelizationCB
// {
//
//   struct VxgiVoxelizationConstants
//   {
//
//       float4 GridCenter;             // Offset:    0
//       float4 GridCenterPrevious;     // Offset:   16
//       int4 ToroidalOffset;           // Offset:   32
//
//       struct VxgiBox4f
//       {
//
//           float4 lower;              // Offset:   48
//           float4 upper;              // Offset:   64
//
//       } ScissorRegionsClipSpace[5];  // Offset:   48
//       int4 TextureToAmapTranslation[5];// Offset:  208
//       float IrradianceMapSize;       // Offset:  288
//       uint ClipLevelSize;            // Offset:  292
//       uint PackingStride;            // Offset:  296
//       uint AllocationMapSize;        // Offset:  300
//       uint ClipLevelMask;            // Offset:  304
//       uint MaxClipLevel;             // Offset:  308
//       int FirstLevelToDiscard;       // Offset:  312
//       float DiscardLower;            // Offset:  316
//       float DiscardUpper;            // Offset:  320
//       float CullingScale;            // Offset:  324
//       float BroadcastLevels;         // Offset:  328
//       uint UseCullFunction;          // Offset:  332
//       float EmittanceStorageScale;   // Offset:  336
//       uint UseIrradianceMap;         // Offset:  340
//       uint Use6DOpacity;             // Offset:  344
//       uint UseFP32Emittance;         // Offset:  348
//       uint PersistentVoxelData;      // Offset:  352
//       uint UseInvalidateBitmap;      // Offset:  356
//
//   } g_VxgiVoxelizationCB;            // Offset:    0 Size:   360
//
// }
//
// cbuffer VoxelizationMaterialCB
// {
//
//   struct VxgiVoxelizationMaterialConstants
//   {
//
//       float4 ResolutionFactors[5];   // Offset:    0
//       float NoiseScale;              // Offset:   80
//       float NoiseBias;               // Offset:   84
//       int TwoSided;                  // Offset:   88
//       int ProportionalEmittance;     // Offset:   92
//       int DepthSamples;              // Offset:   96
//       int FrontCCW;                  // Offset:  100
//       int OmnidirectionalLight;      // Offset:  104
//
//   } g_VxgiVoxelizationMaterialCB;    // Offset:    0 Size:   108
//
// }
//
// Resource bind info for t_VoxelizationCoverageMasks
// {
//
//   uint4 $Element;                    // Offset:    0 Size:    16
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim Slot Elements
// ------------------------------ ---------- ------- ----------- ---- --------
// t_VoxelizationCoverageMasks       texture  struct         r/o    1        1
// u_AllocationMap                       UAV    uint          3d    1        1
// u_CoverageTextureXYZ_Pos              UAV    uint          3d    2        1
// u_CoverageTextureXYZ_Neg              UAV    uint          3d    3        1
// VoxelizationCB                    cbuffer      NA          NA    1        1
// VoxelizationMaterialCB            cbuffer      NA          NA    2        1
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_Position              0   xyzw        0      POS   float   xyz
// SV_ViewportArrayIndex     0   x           1  VPINDEX    uint   x
// SV_IsFrontFace           0   x           2    FFACE    uint   x
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// no Output
ps_5_0
dcl_globalFlags refactoringAllowed
dcl_constantbuffer cb1[23], dynamicIndexed
dcl_constantbuffer cb2[7], immediateIndexed
dcl_resource_structured t1, 16
dcl_uav_typed_texture3d (uint,uint,uint,uint) u1
dcl_uav_typed_texture3d (uint,uint,uint,uint) u2
dcl_uav_typed_texture3d (uint,uint,uint,uint) u3
dcl_input_ps_siv linear noperspective v0.xyz, position
dcl_input_ps_siv constant v1.x, viewport_array_index
dcl_input_ps_sgv v2.x, is_front_face
dcl_input vCoverage
dcl_temps 12
utof r0.x, v1.x
mul r0.x, r0.x, l(0.334000)
frc r0.y, r0.x
mul r0.y, r0.y, l(3.000000)
round_ni r0.xy, r0.xyxx
ftoi r0.xy, r0.xyxx
iadd r0.z, -r0.x, cb1[19].y
ishl r0.z, l(1), r0.z
itof r0.z, r0.z
mul r0.z, r0.z, v0.z
mad r0.z, r0.z, l(0.500000), l(0.500000)
utof r0.w, cb1[18].y
mul r1.x, r0.w, r0.z
round_ne r1.y, r1.x
mad r1.y, r0.z, r0.w, -r1.y
lt r1.y, |r1.y|, l(0.00781250000)
mad r0.z, r0.z, r0.w, l(0.015625)
movc r1.y, r1.y, r0.z, r1.x
add r1.x, r0.w, -v0.y
if_z r0.y
  ishl r0.z, r0.x, l(1)
  lt r0.w, v0.z, cb1[r0.z + 3].z
  lt r0.z, cb1[r0.z + 4].z, v0.z
  or r0.z, r0.z, r0.w
  mov r2.x, v0.x
  mov r2.yz, r1.xxyx
  mov r3.xyz, l(0,0,1,0)
else
  ieq r0.w, r0.y, l(1)
  if_nz r0.w
    ishl r0.w, r0.x, l(1)
    lt r2.w, v0.z, cb1[r0.w + 3].y
    lt r0.w, cb1[r0.w + 4].y, v0.z
    or r0.z, r0.w, r2.w
    mov r1.z, v0.x
    mov r2.xyz, r1.xyzx
    mov r3.xy, l(0,1,0,0)
  else
    ishl r0.w, r0.x, l(1)
    lt r1.z, v0.z, cb1[r0.w + 3].x
    lt r0.w, cb1[r0.w + 4].x, v0.z
    or r0.z, r0.w, r1.z
    mov r1.w, v0.x
    mov r2.xyz, r1.ywxy
    mov r3.xy, l(1,0,0,0)
  endif
  mov r3.z, l(0)
endif
discard_nz r0.z
if_z r0.z
  not r0.z, v2.x
  movc r0.z, cb2[6].y, r0.z, v2.x
  round_ni r1.xzw, r2.xxyz
  ftoi r1.xzw, r1.xxzw
  movc r0.w, r0.z, l(0.334000), l(-0.334000)
  iadd r4.xyz, -r3.xyzx, r1.xzwx
  movc r1.xzw, r0.zzzz, r1.xxzw, r4.xxyz
  deriv_rtx_coarse r4.x, r1.y
  deriv_rty_coarse r4.y, r1.y
  frc r1.y, r1.y
  itof r2.w, cb2[6].x
  mad r0.w, r0.w, r2.w, l(2.000000)
  add r0.w, r0.w, -cb2[5].x
  add r0.w, r0.w, -cb2[5].y
  add r0.w, r0.w, r1.y
  add r1.y, r1.y, cb2[5].y
  add r1.y, r1.y, l(1.000000)
  movc r0.w, r0.z, r1.y, r0.w
  imad r0.y, cb2[6].x, l(3), r0.y
  imul null, r0.y, r0.y, l(9)
  ishl r0.y, r0.y, l(3)
  and r5.xyzw, vCoverage.xxxx, l(1, 2, 4, 8)
  dp2 r1.y, r4.xyxx, l(0.062500, -0.187500, 0.000000, 0.000000)
  add r1.y, r0.w, r1.y
  mad r1.y, cb2[5].x, l(0.900000), r1.y
  mul r1.y, r1.y, l(3.000000)
  ftoi r1.y, r1.y
  imin r1.y, r1.y, l(8)
  imax r1.y, r1.y, l(0)
  ishl r1.y, r1.y, l(3)
  iadd r1.y, r0.y, r1.y
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r6.xyzw, r1.y, l(0), t1.xyzw
  movc r6.xyzw, r5.xxxx, r6.xyzw, l(0,0,0,0)
  dp2 r1.y, r4.xyxx, l(-0.062500, 0.187500, 0.000000, 0.000000)
  add r1.y, r0.w, r1.y
  mad r1.y, cb2[5].x, l(0.400000), r1.y
  mul r1.y, r1.y, l(3.000000)
  ftoi r1.y, r1.y
  imin r1.y, r1.y, l(8)
  imax r1.y, r1.y, l(0)
  ishl r1.y, r1.y, l(3)
  iadd r1.y, r0.y, r1.y
  iadd r1.y, r1.y, l(1)
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r7.xyzw, r1.y, l(0), t1.xyzw
  or r7.xyzw, r6.xyzw, r7.xyzw
  movc r6.xyzw, r5.yyyy, r7.xyzw, r6.xyzw
  dp2 r1.y, r4.xyxx, l(0.312500, 0.062500, 0.000000, 0.000000)
  add r1.y, r0.w, r1.y
  mad r1.y, cb2[5].x, l(0.500000), r1.y
  mul r1.y, r1.y, l(3.000000)
  ftoi r1.y, r1.y
  imin r1.y, r1.y, l(8)
  imax r1.y, r1.y, l(0)
  ishl r1.y, r1.y, l(3)
  iadd r1.y, r0.y, r1.y
  iadd r1.y, r1.y, l(2)
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r7.xyzw, r1.y, l(0), t1.xyzw
  or r7.xyzw, r6.xyzw, r7.xyzw
  movc r6.xyzw, r5.zzzz, r7.xyzw, r6.xyzw
  dp2 r1.y, r4.xyxx, l(-0.187500, -0.312500, 0.000000, 0.000000)
  add r1.y, r0.w, r1.y
  mad r1.y, cb2[5].x, l(0.600000), r1.y
  mul r1.y, r1.y, l(3.000000)
  ftoi r1.y, r1.y
  imin r1.y, r1.y, l(8)
  imax r1.y, r1.y, l(0)
  ishl r1.y, r1.y, l(3)
  iadd r1.y, r0.y, r1.y
  iadd r1.y, r1.y, l(3)
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r7.xyzw, r1.y, l(0), t1.xyzw
  or r7.xyzw, r6.xyzw, r7.xyzw
  movc r5.xyzw, r5.wwww, r7.xyzw, r6.xyzw
  and r6.xyzw, vCoverage.xxxx, l(16, 32, 64, 128)
  dp2 r1.y, r4.xyxx, l(-0.312500, 0.312500, 0.000000, 0.000000)
  add r1.y, r0.w, r1.y
  mad r1.y, cb2[5].x, l(0.100000), r1.y
  mul r1.y, r1.y, l(3.000000)
  ftoi r1.y, r1.y
  imin r1.y, r1.y, l(8)
  imax r1.y, r1.y, l(0)
  ishl r1.y, r1.y, l(3)
  iadd r1.y, r0.y, r1.y
  iadd r1.y, r1.y, l(4)
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r7.xyzw, r1.y, l(0), t1.xyzw
  or r7.xyzw, r5.xyzw, r7.xyzw
  movc r5.xyzw, r6.xxxx, r7.xyzw, r5.xyzw
  dp2 r1.y, r4.xyxx, l(-0.437500, 0.062500, 0.000000, 0.000000)
  add r1.y, r0.w, r1.y
  mad r1.y, cb2[5].x, l(0.800000), r1.y
  mul r1.y, r1.y, l(3.000000)
  ftoi r1.y, r1.y
  imin r1.y, r1.y, l(8)
  imax r1.y, r1.y, l(0)
  ishl r1.y, r1.y, l(3)
  iadd r1.y, r0.y, r1.y
  iadd r1.y, r1.y, l(5)
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r7.xyzw, r1.y, l(0), t1.xyzw
  or r7.xyzw, r5.xyzw, r7.xyzw
  movc r5.xyzw, r6.yyyy, r7.xyzw, r5.xyzw
  dp2 r1.y, r4.xyxx, l(0.187500, 0.437500, 0.000000, 0.000000)
  add r1.y, r0.w, r1.y
  mad r1.y, cb2[5].x, l(0.700000), r1.y
  mul r1.y, r1.y, l(3.000000)
  ftoi r1.y, r1.y
  imin r1.y, r1.y, l(8)
  imax r1.y, r1.y, l(0)
  ishl r1.y, r1.y, l(3)
  iadd r1.y, r0.y, r1.y
  iadd r1.y, r1.y, l(6)
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r7.xyzw, r1.y, l(0), t1.xyzw
  or r7.xyzw, r5.xyzw, r7.xyzw
  movc r5.xyzw, r6.zzzz, r7.xyzw, r5.xyzw
  dp2 r1.y, r4.xyxx, l(0.437500, -0.437500, 0.000000, 0.000000)
  add r0.w, r0.w, r1.y
  mad r0.w, cb2[5].x, l(0.300000), r0.w
  mul r0.w, r0.w, l(3.000000)
  ftoi r0.w, r0.w
  imin r0.w, r0.w, l(8)
  imax r0.w, r0.w, l(0)
  ishl r0.w, r0.w, l(3)
  iadd r0.y, r0.w, r0.y
  iadd r0.y, r0.y, l(7)
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r4.xyzw, r0.y, l(0), t1.xyzw
  or r4.xyzw, r4.xyzw, r5.xyzw
  movc r4.xyzw, r6.wwww, r4.xyzw, r5.xyzw
  ine r0.y, cb2[5].z, l(0)
  ine r0.w, l(0), cb1[21].z
  not r1.y, r0.w
  or r0.y, r0.y, r1.y
  deriv_rtx_coarse r5.xyz, r2.zxyz
  deriv_rty_coarse r2.xyz, r2.yzxy
  mul r6.xyz, r2.xyzx, r5.xyzx
  mad r2.xyz, r5.zxyz, r2.yzxy, -r6.xyzx
  dp3 r1.y, r2.xyzx, r2.xyzx
  rsq r1.y, r1.y
  mul r2.xyz, r1.yyyy, r2.xyzx
  movc r2.xyz, r0.zzzz, r2.xyzx, -r2.xyzx
  lt r5.xyz, l(-0.010000, -0.010000, -0.010000, 0.000000), r2.xyzx
  and r5.yz, r5.yyzy, l(0, 0x000ffc00, 0x3ff00000, 0)
  bfi r0.z, l(10), l(0), r5.x, r5.y
  iadd r5.x, r5.z, r0.z
  lt r2.xyz, r2.xyzx, l(0.010000, 0.010000, 0.010000, 0.000000)
  and r2.yz, r2.yyzy, l(0, 0x000ffc00, 0x3ff00000, 0)
  bfi r0.z, l(10), l(0), r2.x, r2.y
  iadd r5.y, r2.z, r0.z
  movc r0.yz, r0.yyyy, l(0,1.99999988,1.99999988,0), r5.xxyx
  iadd r1.xyz, -r3.xyzx, r1.xzwx
  or r1.w, r0.z, r0.y
  iadd r2.xy, l(-1, -1, 0, 0), cb1[18].ywyy
  not r2.z, r2.x
  ishr r5.xyz, cb1[2].xyzx, r0.xxxx
  imad r6.z, cb1[18].z, r0.x, l(1)
  mov r6.xy, l(0,0,0,0)
  mov r7.xyz, r1.xyzx
  mov r8.xy, r4.yzyy
  mov r8.zw, l(0,0,-1,0)
  mov r2.w, r4.x
  mov r3.w, l(0)
  loop
    uge r5.w, r3.w, l(4)
    breakc_nz r5.w
    and r5.w, r1.w, r2.w
    if_nz r5.w
      or r5.w, r7.y, r7.x
      or r5.w, r7.z, r5.w
      and r5.w, r2.z, r5.w
      if_z r5.w
        ishr r9.xyzw, r7.xyzz, cb1[r0.x + 13].wwww
        iadd r9.xyzw, r9.xyzw, cb1[r0.x + 13].xyzz
        and r9.xyzw, r2.yyyy, r9.xyzw
        iadd r5.w, r9.y, r9.x
        iadd r10.x, r9.w, r5.w
        ine r5.w, r8.z, r10.x
        ld_uav_typed_indexable(texture3d)(uint,uint,uint,uint) r6.w, r9.xyww, u1.yzwx
        movc r10.y, r5.w, r6.w, r8.w
        and r5.w, r10.y, l(4)
        if_nz r5.w
          and r5.w, r10.y, l(1)
          if_z r5.w
            or r10.y, r10.y, l(1)
            store_uav_typed u1.xyzw, r9.xyzw, r10.yyyy
          endif
          and r9.xy, r0.yzyy, r2.wwww
          iadd r11.xyz, r5.xyzx, r7.xyzx
          and r11.xyz, r2.xxxx, r11.xyzx
          iadd r11.xyz, r6.xyzx, r11.xyzx
          if_nz r9.x
            atomic_or u2, r11.xyzx, r9.x
          endif
          ine r5.w, r9.y, l(0)
          and r5.w, r0.w, r5.w
          if_nz r5.w
            atomic_or u3, r11.xyzx, r9.y
          endif
        endif
        mov r8.zw, r10.xxxy
      endif
    endif
    iadd r7.xyz, r3.xyzx, r7.xyzx
    iadd r3.w, r3.w, l(1)
    mov r9.x, r8.y
    mov r9.y, r4.w
    mov r2.w, r8.x
    mov r8.xy, r9.xyxx
  endloop
  discard_nz l(-1)
endif
ret
// Approximately 258 instruction slots used
